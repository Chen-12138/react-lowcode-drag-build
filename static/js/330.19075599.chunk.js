"use strict";(self.webpackChunkts_react_app=self.webpackChunkts_react_app||[]).push([[330],{330:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var a=n(1413),r=n(4165),c=n(5861),l=n(9439),s=n(757),i=n(9153),o=n(2351),u=n(3695),d=n(2551),p=n(7083),m=n(9553),f=n(7309),h=n(9421),v=n(2791),x="index_container__wuX3Q",g="index_frameContainer__g05-I",y="index_card__2vJlv",E=n(5486),Z="index_contextmenu__JmTtx",w=n(184),_=function(e){var t=e.menuPosition,n=e.id,a=e.btnList,l=e.refresh,i=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.EI)({id:n});case 3:u.ZP.success("\u53d1\u5e03\u56fe\u7247\u6210\u529f"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),u.ZP.error("\u53d1\u5e03\u56fe\u7247\u5931\u8d25");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.ao)({id:n});case 3:u.ZP.success("\u5220\u9664\u56fe\u7247\u6210\u529f"),null===l||void 0===l||l(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),u.ZP.error("\u5220\u9664\u56fe\u7247\u5931\u8d25");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.yI)({id:n});case 3:u.ZP.success("\u6dfb\u52a0\u6210\u529f"),null===l||void 0===l||l(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),u.ZP.error("\u6dfb\u52a0\u5931\u8d25");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,w.jsx)("div",{className:Z,style:{top:t.top,left:t.left},children:(0,w.jsx)("ul",{children:(0,w.jsxs)(w.Fragment,{children:[a.includes("publish")&&(0,w.jsx)("li",{onClick:i,children:"\u53d1\u5e03"}),a.includes("add")&&(0,w.jsx)("li",{onClick:d,children:"\u6dfb\u52a0\u81f3\u6211\u7684\u7d20\u6750"})," ",a.includes("delete")&&(0,w.jsx)("li",{onClick:o,children:"\u5220\u9664\u7d20\u6750"})]})})})},b=function(e){var t=e.isFrame,n=void 0!==t&&t,Z=(0,v.useState)([]),b=(0,l.Z)(Z,2),j=b[0],N=b[1],C=(0,v.useState)(!1),k=(0,l.Z)(C,2),P=k[0],M=k[1],S=(0,v.useState)(""),z=(0,l.Z)(S,2),L=z[0],H=z[1],V=(0,v.useState)(!1),O=(0,l.Z)(V,2),I=O[0],T=O[1],D=(0,v.useState)({left:0,top:0}),A=(0,l.Z)(D,2),F=A[0],R=A[1],U=(0,v.useState)("my"),B=(0,l.Z)(U,2),G=B[0],J=B[1],X={name:"file",action:E.Z.uploadUrl,headers:{authorization:i.Z.getState().user.access_token},showUploadList:!1,onChange:function(e){M(!0),"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?(u.ZP.success("".concat(e.file.name," \u4e0a\u4f20\u6210\u529f")),K()):"error"===e.file.status&&(u.ZP.error("".concat(e.file.name," \u4e0a\u4f20\u5931\u8d25")),M(!1))}},K=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(){var t,n,a,c=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:"my",e.prev=1,M(!0),"my"!==t){e.next=9;break}return e.next=6,(0,s.xn)();case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,(0,s.nA)();case 11:a=e.sent;case 12:N(null===(n=a)||void 0===n?void 0:n.result),M(!1),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),u.ZP.error("\u83b7\u53d6\u6570\u636e\u5931\u8d25"),M(!1);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){K()}),[]);var Q=function(e){e.stopPropagation(),e.preventDefault(),R({top:e.clientY,left:e.clientX}),H(e.target.dataset.id),T(!0)};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.Z,{defaultActiveKey:"my",items:[{key:"my",label:"\u6211\u7684\u7d20\u6750"},{key:"all",label:"\u7d20\u6750\u5e7f\u573a"}],onChange:function(e){T(!1),J(e),K(e)}}),(0,w.jsx)(p.Z,{spinning:P,style:{height:"100%"},children:(0,w.jsx)(w.Fragment,{children:j.length?(0,w.jsxs)("div",{onClick:function(e){2!==e.button&&I&&T(!1)},style:{overflow:"auto",height:"100%"},children:["my"===G&&(0,w.jsx)(m.Z,(0,a.Z)((0,a.Z)({},X),{},{children:(0,w.jsx)(f.Z,{type:"primary",icon:(0,w.jsx)(o.Z,{}),children:"\u4e0a\u4f20\u56fe\u7247"})})),(0,w.jsx)("div",{style:{display:"flex",flexWrap:"wrap",marginTop:12},children:(0,w.jsxs)("div",{className:n?g:x,onDragStart:function(e){e.dataTransfer.setData("url",e.target.dataset.url)},children:[j.map((function(e){return(0,w.jsx)("div",{className:y,draggable:!0,"data-url":e.url,"data-id":e._id,onContextMenu:Q,children:(0,w.jsx)("img",{"data-id":e._id,draggable:!1,src:e.url,style:{width:"100%",height:"100%"}})},e.url)})),I&&(0,w.jsx)(_,{btnList:"my"===G?["delete","publish"]:["add"],menuPosition:F,id:L,refresh:K})]})})]}):(0,w.jsx)(h.Z,{style:{marginTop:12}})})})]})}},9421:function(e,t,n){n.d(t,{Z:function(){return v}});var a=n(4942),r=n(7462),c=n(1694),l=n.n(c),s=n(2791),i=n(1929),o=n(3486),u=function(){var e=(0,s.useContext(i.E_).getPrefixCls)("empty-img-default");return s.createElement("svg",{className:e,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},s.createElement("g",{fill:"none",fillRule:"evenodd"},s.createElement("g",{transform:"translate(24 31.67)"},s.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),s.createElement("path",{className:"".concat(e,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),s.createElement("path",{className:"".concat(e,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"}),s.createElement("path",{className:"".concat(e,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),s.createElement("path",{className:"".concat(e,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})),s.createElement("path",{className:"".concat(e,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),s.createElement("g",{className:"".concat(e,"-g"),transform:"translate(149.65 15.383)"},s.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),s.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},d=function(){var e=(0,s.useContext(i.E_).getPrefixCls)("empty-img-simple");return s.createElement("svg",{className:e,width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},s.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},s.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"32",cy:"33",rx:"32",ry:"7"}),s.createElement("g",{className:"".concat(e,"-g"),fillRule:"nonzero"},s.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),s.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",className:"".concat(e,"-path")}))))},p=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},m=s.createElement(u,null),f=s.createElement(d,null),h=function(e){var t=e.className,n=e.prefixCls,c=e.image,u=void 0===c?m:c,d=e.description,h=e.children,v=e.imageStyle,x=p(e,["className","prefixCls","image","description","children","imageStyle"]),g=s.useContext(i.E_),y=g.getPrefixCls,E=g.direction;return s.createElement(o.Z,{componentName:"Empty"},(function(e){var c,i=y("empty",n),o="undefined"!==typeof d?d:e.description,p="string"===typeof o?o:"empty",m=null;return m="string"===typeof u?s.createElement("img",{alt:p,src:u}):u,s.createElement("div",(0,r.Z)({className:l()(i,(c={},(0,a.Z)(c,"".concat(i,"-normal"),u===f),(0,a.Z)(c,"".concat(i,"-rtl"),"rtl"===E),c),t)},x),s.createElement("div",{className:"".concat(i,"-image"),style:v},m),o&&s.createElement("div",{className:"".concat(i,"-description")},o),h&&s.createElement("div",{className:"".concat(i,"-footer")},h))}))};h.PRESENTED_IMAGE_DEFAULT=m,h.PRESENTED_IMAGE_SIMPLE=f;var v=h}}]);
//# sourceMappingURL=330.19075599.chunk.js.map