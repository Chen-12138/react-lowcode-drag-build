"use strict";(self.webpackChunkts_react_app=self.webpackChunkts_react_app||[]).push([[235],{3235:function(e,n,t){t.d(n,{Z:function(){return U}});var o=t(4165),r=t(1413),a=t(5861),i=t(9439),l=t(4925),c=t(757),u=t(1480),s=[{label:"\u4e0a\u4e0b\u7ffb\u9875",value:u.lK.UpDown},{label:"\u5de6\u53f3\u7ffb\u9875",value:u.lK.LeftRight}],d=[{label:"\u5141\u8bb8\u8bbf\u95ee",value:u.qb.Allow},{label:"\u4e0d\u5141\u8bb8\u8bbf\u95ee",value:u.qb.NotAllow}],p=t(7363),f=t(7106),v=t(9286),m=t(940),y=t(2894),h=t(3695),x=t(8885),g=t(7083),Z=t(6106),C=t(9553),j=t(1951),w=t(7309),_=t(2791),M="index_view__P3AL7",S="index_btnWrap__jAq0R",b="index_btn__a84DX",k=t(9153),P=t(5486),I=t(184),D=["refresh","id","onClose"],L=m.Z.TextArea,U=function(e){var n=e.refresh,u=e.id,U=e.onClose,N=(0,l.Z)(e,D),E=(0,_.useState)(!1),R=(0,i.Z)(E,2),A=R[0],F=R[1],T=(0,_.useState)(!1),V=(0,i.Z)(T,2),q=V[0],B=V[1],H=(0,_.useState)(),K=(0,i.Z)(H,2),z=K[0],W=K[1],O=(0,_.useState)(),Q=(0,i.Z)(O,2),X=Q[0],$=Q[1],G=y.Z.useForm(),Y=(0,i.Z)(G,1)[0],J=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var n,t,a,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.validateFields();case 3:return i=Y.getFieldsValue(),e.next=6,(0,c.T$)((0,r.Z)((0,r.Z)((0,r.Z)({},X),i),{},{coverImage:(null===(n=i.coverImage)||void 0===n||null===(t=n[0])||void 0===t||null===(a=t.response)||void 0===a?void 0:a.result.url)||i.coverImage[0]}));case 6:setTimeout((function(){U()}),500),h.ZP.success("\u4fdd\u5b58\u6210\u529f"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),h.ZP.error("\u4fdd\u5b58\u5931\u8d25");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t,a,i,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.validateFields();case 3:return l=Y.getFieldsValue(),e.next=6,(0,c.T$)((0,r.Z)((0,r.Z)((0,r.Z)({},X),l),{},{coverImage:(null===(t=l.coverImage)||void 0===t||null===(a=t[0])||void 0===a||null===(i=a.response)||void 0===i?void 0:i.result.url)||l.coverImage[0],isPublish:!0}));case 6:setTimeout((function(){U()}),500),h.ZP.success("\u4fdd\u5b58\u5e76\u53d1\u5e03\u6210\u529f"),null===n||void 0===n||n(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),h.ZP.error("\u4fdd\u5b58\u5e76\u53d1\u5e03\u6210\u529f");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();(0,_.useEffect)((function(){function e(){return(e=(0,a.Z)((0,o.Z)().mark((function e(){var n,a,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F(!0),e.next=4,(0,c.j)(u||"");case 4:i=e.sent,$((0,r.Z)({},i.result)),Y.setFieldsValue((0,r.Z)((0,r.Z)({},i.result),{},{coverImage:[null===(n=i.result)||void 0===n?void 0:n.coverImage]})),W((null===(a=i.result)||void 0===a?void 0:a.coverImage)||t(1569)),F(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),F(!1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}u&&function(){e.apply(this,arguments)}()}),[]);var ne=(0,I.jsxs)("div",{children:[q?(0,I.jsx)(f.Z,{}):(0,I.jsx)(v.Z,{}),(0,I.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,I.jsxs)(x.Z,(0,r.Z)((0,r.Z)({title:"\u9875\u9762\u57fa\u7840\u8bbe\u7f6e",width:560,maskClosable:!1,onClose:U},N),{},{children:[(0,I.jsx)(g.Z,{spinning:A,children:(0,I.jsxs)(y.Z,{layout:"horizontal",labelAlign:"left",labelCol:{span:6},wrapperCol:{span:18},form:Y,onValuesChange:function(e,n){console.log(e)},children:[(0,I.jsx)(Z.Z,{gutter:16,children:(0,I.jsx)(y.Z.Item,{name:"coverImage",valuePropName:"fileList",getValueFromEvent:function(e){return console.log("Upload event:",e),Array.isArray(e)?e:(console.log(null===e||void 0===e?void 0:e.fileList[0]),null===e||void 0===e?void 0:e.fileList)},children:(0,I.jsx)(C.Z,{listType:"picture-card",className:"avatar-uploader",showUploadList:!1,headers:{authorization:k.Z.getState().user.access_token},action:P.Z.uploadUrl,onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&function(e,n){var t=new FileReader;t.addEventListener("load",(function(){return n(t.result)})),t.readAsDataURL(e)}(e.file.originFileObj,(function(e){B(!1),W(e)})):B(!0)},children:z?(0,I.jsx)("img",{src:z,alt:"avatar",style:{width:"100%"}}):ne})})}),(0,I.jsx)(y.Z.Item,{label:"\u6807\u9898",name:"title",children:(0,I.jsx)(m.Z,{})}),(0,I.jsx)(y.Z.Item,{label:"\u63cf\u8ff0",name:"description",children:(0,I.jsx)(L,{})}),(0,I.jsx)(y.Z.Item,{label:"\u7ffb\u9875\u65b9\u5f0f",name:"flipType",children:(0,I.jsx)(j.Z,{options:s})}),(0,I.jsx)(y.Z.Item,{label:"\u4f5c\u54c1\u8bbf\u95ee\u72b6\u6001",name:"status",children:(0,I.jsx)(j.Z,{options:d})})]})}),(0,I.jsx)("div",{className:M,children:X&&(0,I.jsx)(p.default,{id:u,projectData:X})}),(0,I.jsxs)("div",{className:S,children:[(0,I.jsx)(w.Z,{type:"primary",className:b,onClick:ee,children:"\u4fdd\u5b58\u5e76\u53d1\u5e03"}),(0,I.jsx)(w.Z,{className:b,onClick:J,children:"\u4fdd\u5b58"}),(0,I.jsx)(w.Z,{className:b,onClick:U,children:"\u53d6\u6d88"})]})]}))}},3394:function(e,n,t){t.d(n,{Z:function(){return i}});var o=t(1686),r="index_button__QsKQn",a=t(184),i=function(e){var n=e.element;return(0,a.jsx)("div",{className:r,style:n.style,children:(0,a.jsx)(o.Z,{element:n})})}},5274:function(e,n,t){t.d(n,{Z:function(){return i}});var o=t(1686),r="index_circle__FXthc",a=t(184),i=function(e){var n=e.element;return(0,a.jsx)("div",{className:r,style:n.style,children:(0,a.jsx)(o.Z,{element:n})})}},5940:function(e,n,t){var o=t(184);n.Z=function(e){var n=e.propValue;return(0,o.jsx)("img",{style:{height:"100%",width:"100%",overflow:"hidden"},src:n,alt:""})}},5128:function(e,n,t){t.d(n,{Z:function(){return a}});var o="index_music__RPBgP",r=t(184),a=function(e){var n=e.element;return(0,r.jsxs)("div",{className:o,style:n.style,children:["Music",(0,r.jsx)("audio",{autoPlay:!0,src:"https://other-web-ra01-sycdn.kuwo.cn/5c650cd4d3b798405ed9bfab4ae1fe18/63941698/resource/n3/320/31/1/1060334909.mp3"})]})}},1052:function(e,n,t){t.d(n,{Z:function(){return i}});var o=t(1686),r="index_rect__fBigi",a=t(184),i=function(e){var n=e.element;return(0,a.jsx)("div",{className:r,style:n.style,children:(0,a.jsx)(o.Z,{element:n})})}},1686:function(e,n,t){t.d(n,{Z:function(){return s}});var o=t(9439),r=t(2791),a=t(5048),i="index_text__66qHR",l="index_can-edit__99vF5",c=t(6210),u=t(184),s=function(e){var n=e.element,t=(0,a.v9)((function(e){return e.editor})),s=t.editMode,d=t.curComponent,p=(0,c.Z)().setComponentContent,f=(0,r.useState)(!1),v=(0,o.Z)(f,2),m=v[0],y=v[1],h=(0,r.useRef)({}),x=function(e){e.target.contains(h.current)&&e.target!==h.current&&(p({element:n,content:h.current.innerHTML}||"&nbsp;"),y(!1))};(0,r.useEffect)((function(){d!==n&&(y(!1),Z())}),[d]),(0,r.useEffect)((function(){m?window.addEventListener("click",x,!1):window.removeEventListener("click",x)}),[m]);var g=function(e){var n=window.getSelection(),t=document.createRange();t.selectNodeContents(e),n&&(n.removeAllRanges(),n.addRange(t))},Z=function(){var e=window.getSelection();e&&e.removeAllRanges()};return(0,u.jsx)(u.Fragment,{children:"edit"===s?(0,u.jsx)("div",{className:i,children:(0,u.jsx)("div",{ref:h,className:" ".concat(m?l:""),style:{verticalAlign:n.style.verticalAlign},contentEditable:m,onDoubleClick:function(){y(!0),g(h.current)},onMouseDown:function(e){m&&e.stopPropagation()},dangerouslySetInnerHTML:{__html:n.propValue}})}):(0,u.jsx)("div",{className:" ".concat(m?l:""),children:n.propValue})})}},6210:function(e,n,t){t.d(n,{F:function(){return l},Z:function(){return i}});var o=t(5048),r=t(8427),a=t(9153);function i(){var e=(0,o.I0)();return{setProjectData:function(n){e({type:r.M.SetProjectData,payload:n})},setCurrentPageUUID:function(n){e({type:r.M.SetCurrentPageUUID,payload:n})},addPage:function(n){e({type:r.M.AddPage,payload:n})},deletePage:function(n){e({type:r.M.DeletePage,payload:n})},copyPage:function(n){e({type:r.M.CopyPage,payload:n})},setEditor:function(n){e({type:r.M.SetEditor,payload:n})},addComponent:function(n){e({type:r.M.AddComponent,payload:n})},setCurComponent:function(n){var t=n.curComponent,o=n.curComponentIndex;e({type:r.M.SetCurComponent,payload:{curComponent:t,curComponentIndex:o}})},setWrapStyle:function(n){e({type:r.M.SetWrapStyle,payload:n})},setClickComponentStatus:function(n){e({type:r.M.SetClickComponentStatus,payload:n})},setComponetData:function(n){e({type:r.M.SetComponentData,payload:n})},setComponentStyle:function(n){e({type:r.M.SetComponentStyle,payload:n})},setComponentContent:function(n){e({type:r.M.SetComponentContent,payload:n})},deleteComponent:function(n){e({type:r.M.DeleteComponent,payload:n})},upComponent:function(){e({type:r.M.UpComponent})},downComponent:function(){e({type:r.M.DownComponent})},topComponent:function(){e({type:r.M.TopComponent})},bottomComponent:function(){e({type:r.M.BottomComponent})},updateComponentPropValue:function(n){e({type:r.M.UpdateComponentPropValue,payload:n})},recordSnapshot:function(){e({type:r.M.RecordSnapshot})},undo:function(){e({type:r.M.Undo})},redo:function(){e({type:r.M.Redo})},copy:function(){e({type:r.M.Copy})},paste:function(n){e({type:r.M.Paste,payload:n})},cut:function(){e({type:r.M.Cut})},showContextMenu:function(n){e({type:r.M.ShowContextMenu,payload:n})},hideContextMenu:function(){e({type:r.M.HideContextMenu})},clearCanvas:function(){console.log("clear"),e({type:r.M.SetComponentData,payload:[]}),e({type:r.M.SetCurComponent,payload:{curComponent:null,curComponentIndex:null}}),e({type:r.M.RecordSnapshot})}}}var l=function(){var e,n=a.Z.getState().editor,t=n.projectData,o=n.currentPageUUID;return(null===t||void 0===t||null===(e=t.pages)||void 0===e?void 0:e.find((function(e){return e.uuid===o})))||{}}},6299:function(e,n,t){t.d(n,{U:function(){return o},o:function(){return r}});var o={redirect:function(e){e&&(window.location.href=e)},alert:function(e){function n(n){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(e){e&&alert(e)}))},r=[{key:"redirect",label:"\u8df3\u8f6c\u4e8b\u4ef6",event:o.redirect,param:""},{key:"alert",label:"alert \u4e8b\u4ef6",event:o.alert,param:""}]},6842:function(e,n,t){t.d(n,{Z:function(){return a}});var o=t(4165),r=t(5861);function a(e){return i.apply(this,arguments)}function i(){return i=(0,r.Z)((0,o.Z)().mark((function e(n){var t,r,a,i,c=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=c.length>1&&void 0!==c[1]?c[1]:[],r=function(e){return new Promise((function(t){var o=e.animationTime,r=e.value,a=void 0===r?"":r,i=e.isLoop,c=void 0!==i&&i;n.style.setProperty("--time",o+"s"),n.classList.add(a,"animate__animated",l(c));var u=function e(){n.removeEventListener("animationend",e),n.removeEventListener("animationcancel",e),n.classList.remove(a,"animate__animated",l(c)),n.style.removeProperty("--time"),t()};n.addEventListener("animationend",u),n.addEventListener("animationcancel",u)}))},a=0,i=t.length;case 3:if(!(a<i)){e.next=9;break}return e.next=6,r(t[a]);case 6:a++,e.next=3;break;case 9:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}function l(e){return e?"animate__infinite":"animate__no-infinite"}},3903:function(e,n,t){function o(e){var n={};return["width","height","top","left","rotate"].forEach((function(t){"rotate"!==t?n[t]=e[t]:n.transform="rotate("+e[t]+"deg)"})),n}t.d(n,{M:function(){return o}})},7363:function(e,n,t){t.r(n),t.d(n,{default:function(){return M}});var o=t(1413),r=t(4165),a=t(5861),i=t(9439),l="index_content__kZcTY",c=t(1686),u=t(3394),s=t(1052),d=t(5274),p=t(5940),f=t(5128),v=(t(2144),t(2791)),m="index_component-wrap__7Gp8d",y=t(6842),h=t(6299),x=t(184),g=function(e){var n=e.element,t=e.children,o=(e.defaultStyle,e.style),r=(0,v.useRef)(null);return(0,v.useEffect)((function(){n.fns||(n.fns={}),n.animations.length>0&&(n.fns.animation=function(){(0,y.Z)(r.current,n.animations)},n.fns.animation());var e=function(e){n.fns[e]=function(){return h.U[e](n.events[e])},r.current&&(r.current.style.cursor="pointer",r.current.onclick=n.fns[e])};for(var t in n.events)e(t)}),[]),(0,x.jsx)("div",{ref:r,className:"".concat(m),style:o,children:t})},Z=t(3903),C=t(7689),j=t(757),w=t(1480),_=t(9042),M=(t(4676),function(e){var n,t=e.id,m=e.projectData,y=(0,v.useState)(),h=(0,i.Z)(y,2),M=h[0],S=h[1],b=(0,C.UO)().id;(0,v.useEffect)((function(){function e(){return(e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,j.j)(b||t||"");case 3:n=e.sent,S(n.result),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}m?S(m):function(){e.apply(this,arguments)}()}),[]);var k=function(e){switch(e.component){case"Text":default:return(0,x.jsx)(c.Z,{element:e});case"Button":return(0,x.jsx)(u.Z,{element:e});case"Rect":return(0,x.jsx)(s.Z,{element:e});case"Circle":return(0,x.jsx)(d.Z,{element:e});case"Image":return(0,x.jsx)(p.Z,{propValue:e.propValue});case"Music":return(0,x.jsx)(f.Z,{element:e})}};return(0,x.jsx)(x.Fragment,{children:null!==M&&void 0!==M&&M.isPublish?(0,x.jsx)(_.tq,{direction:(null===M||void 0===M?void 0:M.flipType)===w.lK.UpDown?"vertical":"horizontal",style:{width:null===M||void 0===M?void 0:M.width,height:null===M||void 0===M?void 0:M.height},slidesPerView:1,onSlideChange:function(){return console.log("slide change")},onSwiper:function(e){return console.log(e)},children:null===M||void 0===M||null===(n=M.pages)||void 0===n?void 0:n.map((function(e){return(0,x.jsx)(_.o5,{style:{width:"100%"},children:(0,x.jsx)("div",{style:(0,o.Z)((0,o.Z)({width:M.width,height:M.height,transform:"scale(".concat(M.scale/100,")")},null===e||void 0===e?void 0:e.pageStyle),{},{backgroundImage:null!==e&&void 0!==e&&e.pageStyle?"url(".concat(null===e||void 0===e?void 0:e.pageStyle.backgroundImage,")"):""}),children:(0,x.jsx)("div",{className:l,children:(0,x.jsx)("div",{style:(0,o.Z)({},M.canvasStyleData),children:null===e||void 0===e?void 0:e.componentData.map((function(e){return(0,x.jsx)(g,{defaultStyle:e.style,style:(0,Z.M)(e.style),element:e,children:k(e)},e.id)}))})})})},e.uuid)}))}):(0,x.jsx)(x.Fragment,{})})})},1569:function(e,n,t){e.exports=t.p+"static/media/logo.974c2df64313a3b662ad.png"}}]);
//# sourceMappingURL=235.c9da1444.chunk.js.map