"use strict";(self.webpackChunkts_react_app=self.webpackChunkts_react_app||[]).push([[348],{9084:function(e,n,r){r.d(n,{Z:function(){return L}});var t=r(4165),c=r(1413),i=r(5861),s=r(9439),a=r(3801),l=r(3695),o=r(7309),u=r(7382),d=r(7689),p="index_card__ES1PQ",v="index_header-mask__SMrgr",f="index_unpublish__Sx+xU",x="index_cover__u0yrd",h="index_post-wrapper__jtv9i",Z="index_title__rLoeU",k="index_btn-wrapper__44kT2",_="index_btn__gbskZ",m="index_create__lFkXu",j="index_temp-create__tQNp4",y=r(187),w=r(92),b=r(9286),P=r(1480),C=r(757),g=r(2791),N=r(3235),T=r(184),S=a.Z.confirm,L=function(e){var n=e.refresh,a=e.config,L=e.showMoreBtn,U=void 0===L||L,M=e.btnList,X=void 0===M?["edit","copy"]:M,E=e.showPublish,F=void 0!==E&&E,O=(0,d.s0)(),Q=(0,g.useState)(!1),z=(0,s.Z)(Q,2),B=z[0],D=z[1],I=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n,r,i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,P.vX)(),e.next=3,(0,C.D4)((0,c.Z)({},n));case 3:r=e.sent,i=r.result._id,R(i);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,C.CT)({id:null===a||void 0===a?void 0:a._id});case 3:l.ZP.success("\u5220\u9664\u9879\u76ee\u6210\u529f"),null===n||void 0===n||n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l.ZP.error("\u5220\u9664\u9879\u76ee\u5931\u8d25");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,C.zX)({id:null===a||void 0===a?void 0:a._id});case 3:l.ZP.success("\u8bbe\u7f6e\u6a21\u677f\u6210\u529f"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l.ZP.error("\u8bbe\u7f6e\u6a21\u677f\u5931\u8d25");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,C.nT)({id:null===a||void 0===a?void 0:a._id});case 3:l.ZP.success("\u590d\u5236\u6210\u529f"),null===n||void 0===n||n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l.ZP.error("\u590d\u5236\u5931\u8d25");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,C.nT)({id:null===a||void 0===a?void 0:a._id});case 3:n=e.sent,l.ZP.success("\u4f7f\u7528\u6a21\u677f\u6210\u529f"),R(n.result.id),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l.ZP.error("\u4f7f\u7528\u6a21\u677f\u5931\u8d25");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,C.st)({id:null===a||void 0===a?void 0:a._id});case 3:l.ZP.success("\u53d1\u5e03\u6210\u529f"),null===n||void 0===n||n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l.ZP.error("\u53d1\u5e03\u5931\u8d25");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,C.st)({id:null===a||void 0===a?void 0:a._id});case 3:l.ZP.success("\u53d1\u5e03\u6a21\u677f\u6210\u529f"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l.ZP.error("\u53d1\u5e03\u6a21\u677f\u5931\u8d25");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.location.href.split("#")[0],e.prev=1,e.next=4,navigator.clipboard.writeText("".concat(n,"#/view/").concat(null===a||void 0===a?void 0:a._id));case 4:l.ZP.success("\u590d\u5236\u94fe\u63a5\u6210\u529f"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),l.ZP.error("\u590d\u5236\u94fe\u63a5\u5931\u8d25");case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),R=function(e){O("/editor/".concat(e),{replace:!1})};return(0,T.jsxs)(T.Fragment,{children:[a?(0,T.jsxs)("div",{className:p,children:[F&&!a.isPublish&&(0,T.jsx)("span",{className:f,children:"\u672a\u53d1\u5e03"}),(0,T.jsxs)("div",{className:x,onClick:function(){return D(!0)},children:[(0,T.jsx)("div",{className:v}),(0,T.jsx)("div",{className:h,children:(0,T.jsx)("img",{src:(null===a||void 0===a?void 0:a.coverImage)||r(1569)})})]}),(0,T.jsx)("div",{className:Z,children:null===a||void 0===a?void 0:a.title}),(0,T.jsxs)("div",{className:k,children:[X.includes("edit")&&(0,T.jsx)(o.Z,{className:_,type:"link",onClick:function(){return R(null===a||void 0===a?void 0:a._id)},children:"\u7f16\u8f91"}),X.includes("useTemplate")&&(0,T.jsx)(o.Z,{className:_,type:"link",onClick:A,children:"\u4f7f\u7528\u6a21\u677f"}),X.includes("copy")&&(0,T.jsx)(o.Z,{className:_,type:"link",onClick:q,children:"\u590d\u5236"}),U&&(0,T.jsx)(u.Z,{placement:"topLeft",arrow:!0,menu:{items:[{label:(0,T.jsx)("div",{onClick:G,children:"\u53d1\u5e03"}),key:"publish"},{label:(0,T.jsx)("div",{onClick:J,children:"\u590d\u5236\u94fe\u63a5"}),key:"copyUrl"},{label:(0,T.jsx)("div",{onClick:W,children:"\u8bbe\u4e3a\u6211\u7684\u6a21\u677f"}),key:"setTemplate"},{label:(0,T.jsx)("div",{onClick:H,children:"\u53d1\u5e03\u5230\u7d20\u6750\u5e7f\u573a"}),key:"publishTemplate"},{label:(0,T.jsxs)("div",{onClick:function(){S({title:"\u64cd\u4f5c\u63d0\u793a",icon:(0,T.jsx)(y.Z,{}),content:"\u786e\u8ba4\u5220\u9664\u9875\u9762\uff1f\u5220\u9664\u540e\uff0c\u5c06\u65e0\u6cd5\u8bbf\u95ee\u6b64\u9875\u9762\u3002",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){K(),console.log("OK")},onCancel:function(){console.log("Cancel")}})},style:{color:"#f5596e"},children:[(0,T.jsx)(w.Z,{})," \u5220\u9664"]}),key:"delete"}].filter((function(e){return X.includes(e.key)}))},children:(0,T.jsx)(o.Z,{className:_,type:"link",children:"\u66f4\u591a..."})})]})]}):(0,T.jsx)("div",{className:"".concat(p," ").concat(m),children:(0,T.jsxs)("div",{className:j,onClick:I,children:[(0,T.jsx)(b.Z,{}),(0,T.jsx)("p",{style:{marginTop:10},children:"\u65b0\u5efa\u9875\u9762"})]})}),B&&(0,T.jsx)(N.Z,{refresh:n,id:null===a||void 0===a?void 0:a._id,open:B,onClose:function(){return D(!1)}})]})}},2447:function(e,n,r){r.r(n);var t=r(4165),c=r(5861),i=r(9439),s=r(757),a=r(9084),l=r(3695),o=r(7083),u=r(2791),d=r(184);n.default=function(){var e=(0,u.useState)([]),n=(0,i.Z)(e,2),r=n[0],p=n[1],v=(0,u.useState)(!1),f=(0,i.Z)(v,2),x=f[0],h=f[1],Z=(0,u.useState)({type:"my",pageMode:"h5"}),k=(0,i.Z)(Z,2),_=k[0],m=(k[1],function(){var e=(0,c.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),e.next=4,(0,s.ld)(_);case 4:n=e.sent,p(n.result.projects),h(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),l.ZP.error("\u83b7\u53d6\u6570\u636e\u5931\u8d25"),h(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}());return(0,u.useEffect)((function(){m()}),[]),(0,d.jsx)(o.Z,{spinning:x,children:(0,d.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,d.jsx)(a.Z,{}),r.map((function(e){return(0,d.jsx)(a.Z,{refresh:m,showPublish:!0,config:e,btnList:e.isPublish?["edit","copy","copyUrl","delete","setTemplate"]:["edit","copy","publish","delete","setTemplate"]},e._id)}))]})})}}}]);
//# sourceMappingURL=348.05482c63.chunk.js.map